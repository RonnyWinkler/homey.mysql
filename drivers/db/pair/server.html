<script type="application/javascript">

    Homey.setTitle(Homey.__("pair.db.title"));

    Homey.emit("getSettings").then(function (settings) {
        if (settings){
            document.getElementById('host').value = settings.host; 
            document.getElementById('port').value = settings.port; 
            document.getElementById('user').value = settings.user; 
            document.getElementById('pw').value = settings.pw; 
        }
    });

    function settingsChanged(){
        let value = {
            "host": document.getElementById('host').value,
            "port": document.getElementById('port').value,
            "user": document.getElementById('user').value,
            "pw": document.getElementById('pw').value
        };
        Homey.emit("settingsChanged", value).then(function (result) {
        });
    }

    function check(){
        let value = {
            "host": document.getElementById('host').value,
            "port": document.getElementById('port').value,
            "user": document.getElementById('user').value,
            "pw": document.getElementById('pw').value
        };
        Homey.emit("check", value).then(function (result) {
            Homey.alert(result);
        });

    }
  </script>

<div id="dbSetup" class="tabcontent">
    <fieldset>
        <legend><span data-i18n="pair.db.server_settings"></span></legend>
        <div class="field row">
            <label for="host"><span data-i18n="pair.db.host"></span></label>
            <input id="host" type="text" value="" oninput="settingsChanged()"/>
            <label for="port"><span data-i18n="pair.db.port"></span></label>
            <input id="port" type="text" value="" oninput="settingsChanged()"/>
            <label for="user"><span data-i18n="pair.db.user"></span></label>
            <input id="user" type="text" value="" oninput="settingsChanged()"/>
            <label for="pw"><span data-i18n="pair.db.pw"></span></label>
            <input id="pw" type="password" value="" oninput="settingsChanged()"/>
        </div>
    </fieldset>
    <fieldset>
        <p><button id="check" class="left" onclick="check()"><span data-i18n="pair.db.check"></span></button></p>
    </fieldset>
</div>